<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Throne Kicks - Tenis</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../css/style.css" />
  <link rel="stylesheet" href="../css/paginacion.css" />
</head>
<body>
  <header class="main-header">
    <div class="top-bar">
      <div class="logo-container"><img src="../images/file.png" alt="Throne Kicks Logo" /></div>
      <nav class="top-nav">
        <a href="tenis.html">Tenis</a><a href="ropa.html">Ropa</a><a href="accesorios.html">Accesorios</a>
        <a href="retail.html">Retail</a><a href="carrito.html">Carrito</a>
      </nav>
      <div class="search-container">
        <input type="text" id="search-input" placeholder="Buscar productos..." />
        <button id="search-button">Buscar</button>
      </div>
    </div>
    <div class="bottom-bar">
      <a href="#">Destacados</a><a href="#">Jordan</a><a href="#">Nike</a>
      <a href="#">Adidas</a><a href="#">New Balance</a><a href="#">Apparel</a><a href="#">Marcas</a>
    </div>
  </header>

  <main style="padding: 40px 20px;">
    <h2 style="text-align: center;">Tenis</h2>
    <div id="productos-grid" class="grid-container" style="padding-top: 20px;"></div>
    <div class="pagination" id="paginacion"></div>
  </main>

  <footer>
    <p>Â© 2024 Throne Kicks. Todos los derechos reservados.</p>
    <div class="social-links">
      <a href="https://www.instagram.com/thronekicksmx/" target="_blank">
        <img src="https://icones.pro/wp-content/uploads/2021/02/instagram-icone-rouge.png" alt="Instagram" />
      </a>
      <a href="https://wa.me/528123456789" target="_blank">
        <img src="https://icones.pro/wp-content/uploads/2021/02/icone-du-logo-whatsapp-rouge.png" alt="WhatsApp" />
      </a>
    </div>
  </footer>

  <script>
    const productosPorPagina = 49;
    let paginaActual = 1;
    let productosTenis = [];

    function mostrarPagina(pagina) {
      const inicio = (pagina - 1) * productosPorPagina;
      const fin = inicio + productosPorPagina;
      const productosGrid = document.getElementById("productos-grid");
      productosGrid.innerHTML = "";

      productosTenis.slice(inicio, fin).forEach(producto => {
        const imgSrc = producto.img.startsWith("http") ? producto.img : `/images/${producto.img}`;
        const item = document.createElement("div");
        item.classList.add("product-item");
        item.innerHTML = `
          <img src="${imgSrc}" alt="${producto.nombre}" />
          <h3>${producto.nombre}</h3>
          <p>$${producto.precio.toFixed(2)} MXN</p>
        `;
        item.addEventListener("click", () => verDetalles(producto.id));
        productosGrid.appendChild(item);
      });
    }

    function construirPaginacion(totalProductos) {
      const paginacion = document.getElementById("paginacion");
      paginacion.innerHTML = "";
      const totalPaginas = Math.ceil(totalProductos / productosPorPagina);
      for (let i = 1; i <= totalPaginas; i++) {
        const btn = document.createElement("button");
        btn.textContent = i;
        btn.classList.toggle("active", i === paginaActual);
        btn.addEventListener("click", () => {
          paginaActual = i;
          mostrarPagina(paginaActual);
          construirPaginacion(productosTenis.length);
        });
        paginacion.appendChild(btn);
      }
    }

    function verDetalles(productoId) {
      fetch('../api/productos.json')
        .then(res => res.json())
        .then(data => {
          const p = data.find(prod => prod.id === productoId);
          if (p) {
            localStorage.setItem('producto', JSON.stringify(p));
            window.location.href = 'producto.html';
          } else {
            alert("Producto no encontrado.");
          }
        });
    }

    document.addEventListener("DOMContentLoaded", () => {
      fetch("../api/productos.json")
        .then(response => response.json())
        .then(productos => {
          productosTenis = productos.filter(p => p.categoria === "Tenis");
          mostrarPagina(paginaActual);
          construirPaginacion(productosTenis.length);
        })
        .catch(err => console.error("Error al cargar productos:", err));
    });
  </script>
</body>
</html>
